<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>FriBidi: lib/fribidi-bidi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FriBidi
   </div>
   <div id="projectbrief">FriBidi is an implementation of the Unicode Bidirectional Algorithm (bidi)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fribidi-bidi.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Bidirectional Algorithm.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;common.h&quot;</code><br/>
<code>#include &lt;<a class="el" href="fribidi-bidi_8h_source.html">fribidi-bidi.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="fribidi-mirroring_8h_source.html">fribidi-mirroring.h</a>&gt;</code><br/>
<code>#include &lt;fribidi-unicode.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="mem_8h_source.html">mem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bidi-types_8h_source.html">bidi-types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="run_8h_source.html">run.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afa99ec4acc4ecb2dc3c2d05da15d0e3f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX</b>(a, b)&#160;&#160;&#160;((a) &gt; (b) ? (a) : (b))</td></tr>
<tr class="separator:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656270df07bcc4a0dc38807516d62796"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a656270df07bcc4a0dc38807516d62796"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RL_TYPE</b>(list)&#160;&#160;&#160;((list)-&gt;type)</td></tr>
<tr class="separator:a656270df07bcc4a0dc38807516d62796"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3d348ff630f138d31fc0db32919b99d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3d348ff630f138d31fc0db32919b99d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RL_LEN</b>(list)&#160;&#160;&#160;((list)-&gt;len)</td></tr>
<tr class="separator:ad3d348ff630f138d31fc0db32919b99d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a5fe4e11a7e0702ce9ae3a4bdbc414d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a5fe4e11a7e0702ce9ae3a4bdbc414d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RL_POS</b>(list)&#160;&#160;&#160;((list)-&gt;pos)</td></tr>
<tr class="separator:a9a5fe4e11a7e0702ce9ae3a4bdbc414d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008a9128ae0c0f3788abce6228088c70"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a008a9128ae0c0f3788abce6228088c70"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RL_LEVEL</b>(list)&#160;&#160;&#160;((list)-&gt;level)</td></tr>
<tr class="separator:a008a9128ae0c0f3788abce6228088c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92728544da882a8d90c3789d8c486eea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>PUSH_STATUS</b></td></tr>
<tr class="separator:a92728544da882a8d90c3789d8c486eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15879c811581f07a94b0e14f7e91160b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>POP_STATUS</b></td></tr>
<tr class="separator:a15879c811581f07a94b0e14f7e91160b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc016283de24bfda6cae445aea0fe03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>PREV_TYPE_OR_SOR</b>(pp)</td></tr>
<tr class="separator:acdc016283de24bfda6cae445aea0fe03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133d30ffcb4f9ee63517f604802c3893"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>NEXT_TYPE_OR_EOR</b>(pp)</td></tr>
<tr class="separator:a133d30ffcb4f9ee63517f604802c3893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a615a09d2364f7df26070c41e6c22a045"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a615a09d2364f7df26070c41e6c22a045"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FRIBIDI_EMBEDDING_DIRECTION</b>(link)&#160;&#160;&#160;FRIBIDI_LEVEL_TO_DIR(RL_LEVEL(link))</td></tr>
<tr class="separator:a615a09d2364f7df26070c41e6c22a045"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a36ce68baef8b058ddd6d30e689c25299"><td class="memItemLeft" align="right" valign="top">FRIBIDI_ENTRY FriBidiParType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fribidi-bidi_8c.html#a36ce68baef8b058ddd6d30e689c25299">fribidi_get_par_direction</a> (const FriBidiCharType *bidi_types, const FriBidiStrIndex len)</td></tr>
<tr class="memdesc:a36ce68baef8b058ddd6d30e689c25299"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get base paragraph direction.  <a href="#a36ce68baef8b058ddd6d30e689c25299">More...</a><br/></td></tr>
<tr class="separator:a36ce68baef8b058ddd6d30e689c25299"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e365fb877091e74c8bbe8916e171baf"><td class="memItemLeft" align="right" valign="top">FRIBIDI_ENTRY FriBidiLevel&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fribidi-bidi_8c.html#a6e365fb877091e74c8bbe8916e171baf">fribidi_get_par_embedding_levels</a> (const FriBidiCharType *bidi_types, const FriBidiStrIndex len, FriBidiParType *pbase_dir, FriBidiLevel *embedding_levels)</td></tr>
<tr class="memdesc:a6e365fb877091e74c8bbe8916e171baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get bidi embedding levels of a paragraph.  <a href="#a6e365fb877091e74c8bbe8916e171baf">More...</a><br/></td></tr>
<tr class="separator:a6e365fb877091e74c8bbe8916e171baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f5e123ad260bd14b61b899b289bd90"><td class="memItemLeft" align="right" valign="top">FRIBIDI_ENTRY FriBidiLevel&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fribidi-bidi_8c.html#a33f5e123ad260bd14b61b899b289bd90">fribidi_reorder_line</a> (FriBidiFlags flags, const FriBidiCharType *bidi_types, const FriBidiStrIndex len, const FriBidiStrIndex off, const FriBidiParType base_dir, FriBidiLevel *embedding_levels, FriBidiChar *visual_str, FriBidiStrIndex *map)</td></tr>
<tr class="memdesc:a33f5e123ad260bd14b61b899b289bd90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reorder a line of logical string to visual.  <a href="#a33f5e123ad260bd14b61b899b289bd90">More...</a><br/></td></tr>
<tr class="separator:a33f5e123ad260bd14b61b899b289bd90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bidirectional Algorithm. </p>
<p>This file implements most of Unicode Standard Annex #9, Tracking Number 13.</p>
<dl class="section author"><dt>Author</dt><dd>Mahyar Abbaspour </dd>
<dd>
Copyright (C) 2001,2002 Behdad Esfahbod </dd>
<dd>
Copyright (C) 1999,2000 Dov Grobgeld </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a133d30ffcb4f9ee63517f604802c3893"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NEXT_TYPE_OR_EOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pp</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(RL_LEVEL(pp-&gt;next) == RL_LEVEL(pp)                                    \</div>
<div class="line">         ? RL_TYPE(pp-&gt;next)                                               \</div>
<div class="line">         : FRIBIDI_LEVEL_TO_DIR(MAX(RL_LEVEL(pp-&gt;next), RL_LEVEL(pp))))</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15879c811581f07a94b0e14f7e91160b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POP_STATUS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">FRIBIDI_BEGIN_STMT <span class="keywordflow">if</span> (stack_size)                                     \</div>
<div class="line">    {                                                                      \</div>
<div class="line">        if                                                             \</div>
<div class="line">            UNLIKELY(over_pushed &gt; first_interval) over_pushed--;  \</div>
<div class="line">        else {                                                         \</div>
<div class="line">            if                                                     \</div>
<div class="line">                LIKELY(over_pushed ==                          \</div>
<div class="line">                       first_interval) first_interval = 0;     \</div>
<div class="line">            stack_size--;                                          \</div>
<div class="line">            level = status_stack[stack_size].level;                \</div>
<div class="line">            override = status_stack[stack_size].override;          \</div>
<div class="line">        }                                                              \</div>
<div class="line">    }                                                                      \</div>
<div class="line">    FRIBIDI_END_STMT</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acdc016283de24bfda6cae445aea0fe03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREV_TYPE_OR_SOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pp</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(RL_LEVEL(pp-&gt;prev) == RL_LEVEL(pp)                                    \</div>
<div class="line">         ? RL_TYPE(pp-&gt;prev)                                               \</div>
<div class="line">         : FRIBIDI_LEVEL_TO_DIR(MAX(RL_LEVEL(pp-&gt;prev), RL_LEVEL(pp))))</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a92728544da882a8d90c3789d8c486eea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PUSH_STATUS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">FRIBIDI_BEGIN_STMT <span class="keywordflow">if</span> LIKELY(new_level &lt;=                              \</div>
<div class="line">                     FRIBIDI_BIDI_MAX_EXPLICIT_LEVEL)          \</div>
<div class="line">    {                                                                      \</div>
<div class="line">        if                                                             \</div>
<div class="line">            UNLIKELY(level == FRIBIDI_BIDI_MAX_EXPLICIT_LEVEL -    \</div>
<div class="line">                          1) first_interval = over_pushed; \</div>
<div class="line">        status_stack[stack_size].level = level;                        \</div>
<div class="line">        status_stack[stack_size].override = override;                  \</div>
<div class="line">        stack_size++;                                                  \</div>
<div class="line">        level = new_level;                                             \</div>
<div class="line">        override = new_override;                                       \</div>
<div class="line">    }                                                                      \</div>
<div class="line">    else over_pushed++;                                                    \</div>
<div class="line">    FRIBIDI_END_STMT</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a36ce68baef8b058ddd6d30e689c25299"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FRIBIDI_ENTRY FriBidiParType fribidi_get_par_direction </td>
          <td>(</td>
          <td class="paramtype">const FriBidiCharType *&#160;</td>
          <td class="paramname"><em>bidi_types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FriBidiStrIndex&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get base paragraph direction. </p>
<p>This function finds the base direction of a single paragraph, as defined by rule P2 of the Unicode Bidirectional Algorithm available at <a href="http://www.unicode.org/reports/tr9/#P2">http://www.unicode.org/reports/tr9/#P2</a>.</p>
<p>You typically do not need this function as <a class="el" href="fribidi-bidi_8h.html#a9df43cff100877238408249d6d52f1a8" title="Get bidi embedding levels of a paragraph. ">fribidi_get_par_embedding_levels()</a> knows how to compute base direction itself, but you may need this to implement a more sophisticated paragraph direction handling. Note that you can pass more than a paragraph to this function and the direction of the first non-neutral paragraph is returned, which is a very good heuristic to set direction of the neutral paragraphs at the beginning of text. For other neutral paragraphs, you better use the direction of the previous paragraph.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bidi_types</td><td>input list of bidi types as returned by fribidi_get_bidi_types() </td></tr>
    <tr><td class="paramname">len</td><td>input string length</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Base pargraph direction. No weak paragraph direction is returned, only LTR, RTL, or ON. </dd></dl>

</div>
</div>
<a class="anchor" id="a6e365fb877091e74c8bbe8916e171baf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FRIBIDI_ENTRY FriBidiLevel fribidi_get_par_embedding_levels </td>
          <td>(</td>
          <td class="paramtype">const FriBidiCharType *&#160;</td>
          <td class="paramname"><em>bidi_types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FriBidiStrIndex&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FriBidiParType *&#160;</td>
          <td class="paramname"><em>pbase_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FriBidiLevel *&#160;</td>
          <td class="paramname"><em>embedding_levels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get bidi embedding levels of a paragraph. </p>
<p>This function finds the bidi embedding levels of a single paragraph, as defined by the Unicode Bidirectional Algorithm available at <a href="http://www.unicode.org/reports/tr9/">http://www.unicode.org/reports/tr9/</a>. This function implements rules P2 to I1 inclusive, and parts 1 to 3 of L1, except for rule X9 which is implemented in <a class="el" href="fribidi-deprecated_8c.html#a53dd7a0c616e47d4bcfa7fca28df8054">fribidi_remove_bidi_marks()</a>. Part 4 of L1 is implemented in <a class="el" href="fribidi-bidi_8h.html#a1fb49156015c32c7eb4e3f57252076ee" title="Reorder a line of logical string to visual. ">fribidi_reorder_line()</a>.</p>
<p>There are a few macros defined in <a class="el" href="fribidi-bidi-types_8h.html" title="Character bidi types. ">fribidi-bidi-types.h</a> to work with this embedding levels.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bidi_types</td><td>input list of bidi types as returned by fribidi_get_bidi_types() </td></tr>
    <tr><td class="paramname">len</td><td>input string length of the paragraph </td></tr>
    <tr><td class="paramname">pbase_dir</td><td>requested and resolved paragraph base direction </td></tr>
    <tr><td class="paramname">embedding_levels</td><td>output list of embedding levels</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Maximum level found plus one, or zero if any error occured (memory allocation failure most probably). </dd></dl>

</div>
</div>
<a class="anchor" id="a33f5e123ad260bd14b61b899b289bd90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FRIBIDI_ENTRY FriBidiLevel fribidi_reorder_line </td>
          <td>(</td>
          <td class="paramtype">FriBidiFlags&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FriBidiCharType *&#160;</td>
          <td class="paramname"><em>bidi_types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FriBidiStrIndex&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FriBidiStrIndex&#160;</td>
          <td class="paramname"><em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FriBidiParType&#160;</td>
          <td class="paramname"><em>base_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FriBidiLevel *&#160;</td>
          <td class="paramname"><em>embedding_levels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FriBidiChar *&#160;</td>
          <td class="paramname"><em>visual_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FriBidiStrIndex *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reorder a line of logical string to visual. </p>
<p>This function reorders the characters in a line of text from logical to final visual order. This function implements part 4 of rule L1, and rules L2 and L3 of the Unicode Bidirectional Algorithm available at <a href="http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels">http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels</a>.</p>
<p>As a side effect it also sets position maps if not NULL.</p>
<p>You should provide the resolved paragraph direction and embedding levels as set by <a class="el" href="fribidi-bidi_8h.html#a9df43cff100877238408249d6d52f1a8" title="Get bidi embedding levels of a paragraph. ">fribidi_get_par_embedding_levels()</a>. Also note that the embedding levels may change a bit. To be exact, the embedding level of any sequence of white space at the end of line is reset to the paragraph embedding level (That is part 4 of rule L1).</p>
<p>Note that the bidi types and embedding levels are not reordered. You can reorder these (or any other) arrays using the map later. The user is responsible to initialize map to something sensible, like an identity mapping, or pass NULL if no map is needed.</p>
<p>There is an optional part to this function, which is whether non-spacing marks for right-to-left parts of the text should be reordered to come after their base characters in the visual string or not. Most rendering engines expect this behavior, but console-based systems for example do not like it. This is controlled by the FRIBIDI_FLAG_REORDER_NSM flag. The flag is on in FRIBIDI_FLAGS_DEFAULT.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>reorder flags </td></tr>
    <tr><td class="paramname">bidi_types</td><td>input list of bidi types as returned by fribidi_get_bidi_types() </td></tr>
    <tr><td class="paramname">len</td><td>input length of the line </td></tr>
    <tr><td class="paramname">off</td><td>input offset of the beginning of the line in the paragraph </td></tr>
    <tr><td class="paramname">base_dir</td><td>resolved paragraph base direction </td></tr>
    <tr><td class="paramname">embedding_levels</td><td>input list of embedding levels, as returned by <a class="el" href="fribidi-bidi_8h.html#a9df43cff100877238408249d6d52f1a8" title="Get bidi embedding levels of a paragraph. ">fribidi_get_par_embedding_levels()</a> </td></tr>
    <tr><td class="paramname">visual_str</td><td>visual string to reorder </td></tr>
    <tr><td class="paramname">map</td><td>a map of string indices which is reordered to reflect where each glyph ends up</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Maximum level found in this line plus one, or zero if any error occured (memory allocation failure most probably). </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jul 13 2015 14:04:32 for FriBidi by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
